<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/style.css">
<%- include('../partials/nav') %>
<main>
<h1> blogs Show View of : <% title %> </h1>
<section>
  <div>Title: <%= blog.title %>
    <% if (blog.tags.length) { %>
      <ul>
        <% blog.tags.forEach(tagSelected => { %>
          <li><%= tagSelected.name %></li>
        <% }) %>
      </ul>
    <% } else { %>
      <p>No tags added</p>
    <% } %>
  <div>Tags: <%= blog.tags %></div>
    <% if (blog.creator.equals(user?.profile._id)) { %>
    <a href="/blogs/<%= blog._id %>/edit">
      <button>Edit Post</button>
    </a>
    <h3>Add Tags</h3>
  <form action="/blogs/<%= blog._id %>/tags" method="POST">
    <select name="tagId" >
      <% tags.forEach(tag => { %>
      <option value="<%= tag._id %>"><%= tag.name %></option>
      <% }) %>
    </select>
    <button type="submit">Add to Post</button>
  </form>
    <% } %>
    <h4>Comments</h4>
    <% if (user) {%>
      <h5>Add a comment</h5>
      <form action="/blogs/<%= blog._id %>comments" method="POST">
        <textarea name="content"></textarea><br>
        <button>Add Comment</button>
      </form>
      <% } %>
  </div>
    
  <div>
    <%= blog.content %>    
  </div>
</section>
</main>



<%- include('../partials/footer') %>
